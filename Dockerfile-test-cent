# Use the official CentOS image as the base image
FROM centos:7

RUN yum clean all && \
    rm -rf /var/cache/yum

# Update the package manager and install required dependencies
RUN yum -y update && \
    yum -y install wget unzip python3 python3-pip curl && \
    yum clean all

# Install Google Chrome
RUN curl -O https://dl.google.com/linux/direct/google-chrome-stable_current_x86_64.rpm && \
    yum -y localinstall google-chrome-stable_current_x86_64.rpm && \
    rm google-chrome-stable_current_x86_64.rpm



# Set the working directory to /app
WORKDIR /app

# Copy the app files into the container
COPY . .

# Install the required packages
RUN pip install --no-cache-dir -r requirements.txt

# Set up the environment variables
ENV FLASK_APP=app.py
ENV FLASK_ENV=development
ENV SQLALCHEMY_DATABASE_URI=sqlite:///users.db

# Expose port 80 for the Flask app to listen on
EXPOSE 80

# Set the environment variables for Flask
ENV FLASK_APP=app.py 
ENV FLASK_DEBUG=1

# Run the Flask app
CMD ["flask", "run", "--host=0.0.0.0", "--port=80"]
